import{u as C,b as U,f as G,i as H}from"./index-8b7486b1.js";import"./store-2b1fd532.js";import{u as M}from"./index-7911eabc.js";import{b as J,z as O}from"./lodash-es-d2af5045.js";import{d as b,q as D,W as v,o as i,c as w,I as x,J as y,F as V,U as E,N as Z,p as A,b as e,M as P,a as r,am as W,al as q,x as Q,h as j,K as X,L as Y,$ as ee}from"./@vue.runtime-core-3a9e54b6.js";import{u as o,r as te}from"./@vue.reactivity-747ae439.js";import{O as I,o as F}from"./@vue.shared-9aa0355e.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as oe}from"./logo-a4d32851.js";import{v as ne,w as L,T as se}from"./@vue.runtime-dom-7b7b8a44.js";import{Z as ae,_ as le,U as ce}from"./@element-plus.icons-vue-e3809a99.js";import"./element-plus-e43e0101.js";import"./dayjs-7a1ede46.js";import"./@vueuse.core-2f0af90d.js";import"./@vueuse.shared-8ce56883.js";import"./@popperjs.core-c75af06c.js";import"./@ctrl.tinycolor-f8748455.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui.dom-7994f002.js";import"./@floating-ui.core-614032f8.js";import"./monaco-editor-63cfb1df.js";import"./axios-aba6f0e0.js";import"./nprogress-f3b783e1.js";import"./mitt-b509fb6d.js";import"./vue-router-19ed6b98.js";import"./pinia-9e37763f.js";import"./vue-demi-71ba0ef2.js";import"./vue-echarts-f1c2bb29.js";import"./resize-detector-a5205554.js";import"./echarts-be9a7bef.js";import"./tslib-54e39b60.js";import"./zrender-3d337fab.js";import"./mockjs-96a45e78.js";import"./vue-70666ebd.js";const re={class:"route-nav"},_e={key:0,class:"title"},ie=b({name:"route-nav"}),pe=b({...ie,setup(p){const{route:u,browser:f}=M(),{menu:s}=C(),_=D(()=>{function d(t){if(u.path==="/")return!1;if(t.path==u.path)return t;if(t.children){const a=t.children.map(d).find(Boolean);return a?[t,a]:!1}else return!1}return J(s.group.map(d).filter(Boolean))}),h=D(()=>{var d;return(d=O(_.value))==null?void 0:d.name});return(d,t)=>{const a=v("el-breadcrumb-item"),m=v("el-breadcrumb");return i(),w("div",re,[o(f).isMini?(i(),w("p",_e,I(o(h)),1)):(i(),x(m,{key:1},{default:y(()=>[(i(!0),w(V,null,E(o(_),(l,$)=>(i(),x(a,{key:$},{default:y(()=>{var c;return[Z(I(((c=l.meta)==null?void 0:c.label)||l.name),1)]}),_:2},1024))),128))]),_:1}))])}}});const ue=S(pe,[["__scopeId","data-v-0b3d14ae"]]),de={class:"a-menu"},me={class:"a-menu__name"},fe=b({name:"a-menu"}),he=b({...fe,setup(p){const{router:u,route:f}=M(),{menu:s}=C(),_=te("");function h(t){s.setMenu(t);const a=s.getPath(s.group[t]);u.push(a)}function d(){function t(a,m){switch(a.type){case 0:(a.children||[]).forEach(l=>{t(l,m)});break;case 1:f.path.includes(a.path)&&(_.value=String(m),s.setMenu(m));break}}s.group.forEach(t)}return A(()=>s.group.length,()=>{d()},{immediate:!0}),A(()=>f.path,()=>{d()}),(t,a)=>{const m=v("cl-svg"),l=v("el-menu-item"),$=v("el-menu");return i(),w("div",de,[e($,{"default-active":_.value,mode:"horizontal","background-color":"transparent",onSelect:h},{default:y(()=>[(i(!0),w(V,null,E(o(s).group,(c,n)=>(i(),x(l,{key:n,index:`${n}`},{default:y(()=>[c.icon?(i(),x(m,{key:0,name:c.icon,size:18},null,8,["name"])):P("",!0),r("span",me,I(c.name),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])])}}});const ve=S(he,[["__scopeId","data-v-4b807e8a"]]),be={key:0},ye=b({name:"auto-menu"}),we=b({...ye,setup(p){const{router:u,browser:f}=M();return(s,_)=>o(f).isMini?P("",!0):(i(),w("li",be))}});const $e=S(we,[["__scopeId","data-v-ed80d5dc"]]),N=p=>(W("data-v-04069668"),p=p(),q(),p),ke={class:"app-topbar"},ge=N(()=>r("i",{class:"cl-iconfont cl-icon-fold"},null,-1)),xe=[ge],Ce=N(()=>r("div",{class:"flex1"},null,-1)),Me={class:"app-topbar__tools"},Se={key:0,class:"app-topbar__user"},Ie={class:"el-dropdown-link"},Ne={class:"name"},Te=N(()=>r("i",{class:"cl-iconfont cl-icon-user"},null,-1)),Be=N(()=>r("span",null,"个人中心",-1)),Pe=N(()=>r("i",{class:"cl-iconfont cl-icon-exit"},null,-1)),Fe=N(()=>r("span",null,"退出",-1)),Ve=b({name:"app-topbar"}),ze=b({...Ve,setup(p){const{router:u,service:f}=M(),{user:s,app:_}=C();async function h(d){switch(d){case"my":u.push("/my/info");break;case"exit":await f.base.comm.logout(),s.logout();break}}return(d,t)=>{const a=v("cl-chat"),m=v("cl-theme"),l=v("cl-avatar"),$=v("el-dropdown-item"),c=v("el-dropdown-menu"),n=v("el-dropdown");return i(),w(V,null,[o(_).info.menu.isGroup?(i(),x(ve,{key:0})):P("",!0),r("div",ke,[r("div",{class:F(["app-topbar__collapse",{unfold:!o(_).isFold}]),onClick:t[0]||(t[0]=k=>o(_).fold())},xe,2),e(ue),Ce,r("ul",Me,[e($e),r("li",null,[e(a)]),r("li",null,[e(m)])]),o(s).info?(i(),w("div",Se,[e(n,{trigger:"click","hide-on-click":"",onCommand:h},{dropdown:y(()=>[e(c,null,{default:y(()=>[e($,{command:"my"},{default:y(()=>[Te,Be]),_:1}),e($,{command:"exit"},{default:y(()=>[Pe,Fe]),_:1})]),_:1})]),default:y(()=>[r("span",Ie,[r("span",Ne,I(o(s).info.nickName),1),e(l,{size:32,src:o(s).info.headImg},null,8,["src"])])]),_:1})])):P("",!0)])],64)}}});const De=S(ze,[["__scopeId","data-v-04069668"]]);function Ae(p){return typeof p=="function"||Object.prototype.toString.call(p)==="[object Object]"&&!Q(p)}const Ee=b({name:"b-menu",setup(){const{router:p,route:u,browser:f}=M(),{menu:s,app:_}=U();function h(t){t!=u.path&&p.push(t),f.isMini&&_.fold(!0)}function d(){function t(a,m){return a.filter(l=>l.isShow).map(l=>{let $=null;const c=n=>e("div",{class:"wrap"},[e(v("cl-svg"),{name:n.icon},null),X(e("span",null,[n.name]),[[ne,!_.isFold||m!=1]])]);return l.type==0?$=j(e(v("el-sub-menu"),null,null),{index:String(l.id),key:l.id,popperClass:"app-slider__menu"},{title(){return c(l)},default(){return t(l.children||[],m+1)}}):$=j(e(v("el-menu-item"),null,null),{index:l.path,key:l.id},{default(){return c(l)}}),$})}return t(s.list,1)}return()=>{let t;return e("div",{class:"app-slider__menu"},[e(v("el-menu"),{"default-active":u.path,"background-color":"transparent","collapse-transition":!0,collapse:f.isMini?!1:_.isFold,onSelect:h},Ae(t=d())?t:{default:()=>[t]})])}}}),Re={class:"app-slider"},je=r("img",{src:oe},null,-1),Le={key:0},Oe={class:"app-slider__container"},We=b({name:"app-slider"}),qe=b({...We,setup(p){const{browser:u}=G(),{app:f}=C();function s(){location.href=window.location.href}return(_,h)=>(i(),w("div",Re,[r("div",{class:"app-slider__logo",onClick:s},[je,!o(f).isFold||o(u).isMini?(i(),w("span",Le,I(o(f).info.name),1)):P("",!0)]),r("div",Oe,[e(o(Ee))])]))}});const K=p=>(W("data-v-0156c82f"),p=p(),q(),p),Ke={class:"app-process"},Ue=K(()=>r("span",null,"后退",-1)),Ge=K(()=>r("span",null,"首页",-1)),He=["data-index","onClick","onContextmenu"],Je=b({name:"app-process"}),Ze=b({...Je,setup(p){const{refs:u,setRefs:f,route:s,router:_}=M(),{process:h}=C();function d(){if(!h.list.find(n=>n.active)){const n=O(h.list);_.push(n?n.fullPath:"/")}}function t(c){u.scroller.scrollTo({left:c,behavior:"smooth"})}function a(c){const n=u[`item-${c}`];n&&t(n.offsetLeft+n.clientWidth-u.scroller.clientWidth)}function m(c,n){a(n),_.push(c.fullPath)}function l(c){h.remove(c),d()}function $(c,n){H.ContextMenu.open(c,{hover:{target:"app-process__item"},list:[{label:"关闭当前",hidden:n.fullPath!==s.path,callback(k){l(h.list.findIndex(T=>T.fullPath==n.fullPath)),k(),d()}},{label:"关闭其他",callback(k){h.set(h.list.filter(T=>T.fullPath==n.fullPath)),k(),d()}},{label:"关闭所有",callback(k){h.clear(),k(),d()}}]})}return A(()=>s.path,function(c){a(h.list.findIndex(n=>n.fullPath===c)||0)}),(c,n)=>{const k=v("el-icon"),T=v("el-scrollbar");return i(),w("div",Ke,[r("div",{class:"app-process__icon",onClick:n[0]||(n[0]=(...g)=>o(_).back&&o(_).back(...g))},[e(k,null,{default:y(()=>[e(o(ae))]),_:1}),Ue]),r("div",{class:F(["app-process__icon",{active:o(s).path=="/"}]),onClick:n[1]||(n[1]=g=>o(_).push("/"))},[e(k,null,{default:y(()=>[e(o(le))]),_:1}),Ge],2),e(T,{ref:o(f)("scroller"),class:"app-process__scroller"},{default:y(()=>[(i(!0),w(V,null,E(o(h).list,(g,B)=>{var R;return i(),w("div",{key:B,ref_for:!0,ref:o(f)(`item-${B}`),class:F(["app-process__item",{active:g.active}]),"data-index":B,onClick:z=>m(g,Number(B)),onContextmenu:L(z=>$(z,g),["stop","prevent"])},[r("span",null,I(((R=g.meta)==null?void 0:R.label)||g.name||g.path),1),e(k,{onMousedown:L(z=>l(Number(B)),["stop"])},{default:y(()=>[e(o(ce))]),_:2},1032,["onMousedown"])],42,He)}),128))]),_:1},512)])}}});const Qe=S(Ze,[["__scopeId","data-v-0156c82f"]]),Xe={class:"app-views"},Ye=b({name:"app-views"}),et=b({...Ye,setup(p){const{refs:u,setRefs:f,mitt:s}=M(),{process:_,app:h}=C(),d=D(()=>_.list.filter(a=>{var m;return(m=a.meta)==null?void 0:m.keepAlive}).map(a=>a.path.substring(1,a.path.length).replace(/\//g,"-")));function t({el:a,top:m}){const l=u.scrollbar.wrapRef;a&&(m=l.querySelector(a).offsetTop),l.scrollTo({top:m,behavior:"smooth"})}return s.on("view.scrollTo",t),(a,m)=>{const l=v("el-scrollbar"),$=v("router-view");return i(),w("div",Xe,[e($,null,{default:y(({Component:c})=>[e(l,{ref:o(f)("scrollbar")},{default:y(()=>[e(se,{name:o(h).info.router.transition},{default:y(()=>[(i(),x(ee,{include:o(d)},[(i(),x(Y(c)))],1032,["include"]))]),_:2},1032,["name"])]),_:2},1536)]),_:1})])}}});const tt=S(et,[["__scopeId","data-v-ac8aa32c"]]),ot={class:"app-layout__left"},nt={class:"app-layout__right"},st=b({name:"app-layout"}),at=b({...st,setup(p){const{app:u}=C();return(f,s)=>(i(),w("div",{class:F(["app-layout",{collapse:o(u).isFold}])},[r("div",{class:"app-layout__mask",onClick:s[0]||(s[0]=_=>o(u).fold(!0))}),r("div",ot,[e(qe)]),r("div",nt,[e(De),e(Qe),e(tt)])],2))}});const Wt=S(at,[["__scopeId","data-v-f1087b9e"]]);export{Wt as default};
