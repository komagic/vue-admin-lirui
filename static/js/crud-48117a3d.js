import{g as U,i as a}from"./index-f2a88b9d.js";import{_ as V}from"./form-btn.vue_vue_type_script_setup_true_lang-ac19a856.js";import{a as i,b as O}from"./element-plus-e43e0101.js";import{d as y,W as t,o as j,I as q,J as n,b as e,a as z,N as p}from"./@vue.runtime-core-3a9e54b6.js";import{j as J,u as P}from"./@vue.reactivity-747ae439.js";import{O as s}from"./@vue.shared-9aa0355e.js";import"./@vue.runtime-dom-7b7b8a44.js";import"./monaco-editor-9c9b0ff9.js";import"./store-2b1fd532.js";import"./dayjs-7a1ede46.js";import"./axios-aba6f0e0.js";import"./nprogress-f3b783e1.js";import"./lodash-es-d2af5045.js";import"./@vueuse.core-2f0af90d.js";import"./@vueuse.shared-8ce56883.js";import"./mitt-b509fb6d.js";import"./vue-router-19ed6b98.js";import"./pinia-9e37763f.js";import"./vue-demi-71ba0ef2.js";import"./vue-echarts-f1c2bb29.js";import"./resize-detector-a5205554.js";import"./echarts-be9a7bef.js";import"./tslib-54e39b60.js";import"./zrender-3d337fab.js";import"./mockjs-96a45e78.js";import"./vue-70666ebd.js";import"./@element-plus.icons-vue-e3809a99.js";import"./@popperjs.core-c75af06c.js";import"./@ctrl.tinycolor-f8748455.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui.dom-7994f002.js";import"./@floating-ui.core-614032f8.js";import"./index-162287ac.js";const W={style:{padding:"0 10px"}},$=y({name:"demo-crud"}),Be=y({...$,setup(G){const{dict:g}=U(),d=J({status:[{label:"启用",value:1},{label:"禁用",type:"danger",value:0}]}),v=a.useCrud({service:"test"},o=>{o.refresh()}),u=a.useUpsert({items:[{type:"tabs",props:{type:"card",labels:[{label:"基础",value:"base"},{label:"其他",value:"other"}]}},{label:"头像",prop:"avatar",group:"base",component:{name:"cl-upload"}},()=>({label:"姓名",prop:"name",required:!0,group:"base",component:{name:"el-input"}}),{label:"年龄",group:"base",prop:"age",component:{name:"el-input-number"}},{label:"职业",prop:"occupation",group:"other",component:{name:"el-tree-select",props:{data:g.get("occupation"),checkStrictly:!0}}},{label:"身份证照片",prop:"idCardPic",group:"other",component:{name:"cl-upload",props:{isSpace:!0,size:[200,300]}}}],plugins:[a.setFocus("name")],onInfo(o,{next:r,done:l}){l(o)},onSubmit(o,{next:r,close:l,done:f}){console.log("onSubmit",o),r(o)},onOpened(o){var r;((r=u.value)==null?void 0:r.mode)!="info"&&i.success("编辑中")},onClose(o,r){var l;if(((l=u.value)==null?void 0:l.mode)=="update"&&o=="close")return O.confirm("还没填完，确定关闭不？","提示",{type:"warning"}).then(()=>{r(),i.info("好吧")}).catch(()=>{i.success("请继续编辑")});r()}}),b=a.useTable({columns:[{type:"selection",width:60},()=>({label:"#",type:"expand",prop:"detail"}),{label:"基础信息",prop:"baseInfo",children:[{label:"姓名",prop:"name"},{label:"存款(元)",prop:"price",sortable:!0}]},{label:"状态",prop:"status",dict:d.status},{label:"创建时间",prop:"createTime",sortable:"desc"},{type:"op",width:350,buttons:["info","edit","delete",{label:"自定义按钮",onClick({scope:o}){i.success(o.row.name+"正常")}}]}]});function w({data:o}){return["合计","","",o.reduce((r,l)=>parseFloat(r+Number(l.price)),0).toFixed(2)]}const x=a.useAdvSearch({items:[{label:"昵称",prop:"name",component:{name:"el-input"}}]});return(o,r)=>{const l=t("cl-refresh-btn"),f=t("cl-add-btn"),k=t("cl-multi-delete-btn"),C=t("cl-select"),S=t("cl-filter"),h=t("cl-flex1"),T=t("cl-column-custom"),N=t("cl-search-key"),B=t("cl-adv-btn"),_=t("cl-row"),m=t("el-descriptions-item"),I=t("el-descriptions"),A=t("cl-table"),D=t("cl-pagination"),E=t("cl-upsert"),F=t("cl-adv-search"),M=t("cl-crud");return j(),q(M,{ref_key:"Crud",ref:v},{default:n(()=>[e(_,null,{default:n(()=>{var c;return[e(l),e(f),e(k),e(V),e(S,{label:"状态筛选"},{default:n(()=>[e(C,{options:d.status,prop:"status"},null,8,["options"])]),_:1}),e(h),e(T,{columns:(c=P(b))==null?void 0:c.columns},null,8,["columns"]),e(N),e(B)]}),_:1}),e(_,null,{default:n(()=>[e(A,{ref_key:"Table",ref:b,"show-summary":"","summary-method":w},{"column-detail":n(({scope:c})=>[z("div",W,[e(I,{border:"",column:3},{default:n(()=>[e(m,{label:"ID"},{default:n(()=>[p(s(c.row.id),1)]),_:2},1024),e(m,{label:"姓名"},{default:n(()=>[p(s(c.row.name),1)]),_:2},1024),e(m,{label:"存款"},{default:n(()=>[p(s(c.row.price),1)]),_:2},1024),e(m,{label:"创建时间"},{default:n(()=>[p(s(c.row.createTime),1)]),_:2},1024)]),_:2},1024)])]),"column-price":n(({scope:c})=>[p(" ￥"+s(c.row.price),1)]),_:1},512)]),_:1}),e(_,null,{default:n(()=>[e(h),e(D)]),_:1}),e(E,{ref_key:"Upsert",ref:u},null,512),e(F,{ref_key:"AdvSearch",ref:x},null,512)]),_:1},512)}}});export{Be as default};
